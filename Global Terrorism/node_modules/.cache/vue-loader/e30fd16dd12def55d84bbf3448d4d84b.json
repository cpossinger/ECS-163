{"remainingRequest":"/home/cam/Documents/ECS 163/Homework 4/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cam/Documents/ECS 163/Homework 4/src/components/View1.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/cam/Documents/ECS 163/Homework 4/src/components/View1.vue","mtime":1612368590881},{"path":"/home/cam/Documents/ECS 163/Homework 4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cam/Documents/ECS 163/Homework 4/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/cam/Documents/ECS 163/Homework 4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cam/Documents/ECS 163/Homework 4/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBtYXBib3hnbCBmcm9tICJtYXBib3gtZ2wiCmltcG9ydCAqIGFzIGQzIGZyb20gImQzIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRGFya01hcCIsCiAgcHJvcHM6IHsKICAgIGRhdGFzZXQ6IHsKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgIHR5cGU6IEFycmF5CiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYWNjZXNzVG9rZW46ICJway5leUoxSWpvaVkzQnZjM05wYm1kbGNpSXNJbUVpT2lKamEydHFNSFY1YmpFeE5ISXpNblZ1ZHpjMWJ6SjRkV2hvSW4wLjUzZzN4UzE3T05RODB4eUc4MEZ6cHciLAogICAgICBtYXA6IG51bGwsCiAgICAgIGNvbnRhaW5lcjogbnVsbCwKICAgICAgc3ZnOiBudWxsLAogICAgICBkb3RzOiBudWxsLAogICAgICBmaWx0ZXJlZF9kYXRhc2V0OiB0aGlzLmRhdGFzZXQsCiAgICAgIHNlbGVjdGVkOiAiMjAxMCIsCiAgICAgIG9wdGlvbnM6IFsuLi5uZXcgU2V0KHRoaXMuZGF0YXNldC5tYXAoaXRlbSA9PiBpdGVtLml5ZWFyKSldLAogICAgICBlbGVtZW50OiBudWxsLAogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgIHRoaXMuaW5pdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgaW5pdCgpewogICAgICBtYXBib3hnbC5hY2Nlc3NUb2tlbiA9IHRoaXMuYWNjZXNzVG9rZW47CgogICAgICB0aGlzLm1hcCA9IG5ldyBtYXBib3hnbC5NYXAoewogICAgICAgIGNvbnRhaW5lcjogIm1hcENvbnRhaW5lciIsCiAgICAgICAgc3R5bGU6ICJtYXBib3g6Ly9zdHlsZXMvY3Bvc3Npbmdlci9ja2tqM2s3NDkxY29vMTdyeDZleTlnYTY3IiwKICAgICAgICB6b29tOiAyLAogICAgICB9KTsKCiAgICAgIHRoaXMubWFwLm9uKCJ2aWV3cmVzZXQiLCAoKSA9PiB7dGhpcy5yZW5kZXIoKX0pOwogICAgICB0aGlzLm1hcC5vbigibW92ZSIsICgpID0+IHt0aGlzLnJlbmRlcigpfSk7CiAgICAgIHRoaXMubWFwLm9uKCJtb3ZlZW5kIiwgKCkgPT4ge3RoaXMucmVuZGVyKCl9KTsKCiAgICAgIC8qCiAgICAgIGQzLnNlbGVjdEFsbCgiLm1hcGJveGdsLWNhbnZhcyIpCiAgICAgIC5zdHlsZSgib3BhY2l0eSIsIDEpCiAgICAgIC5zdHlsZSgicG9zaXRpb24iLCJhYnNvbHV0ZSIpCiAgICAgIC5zdHlsZSgiei1pbmRleCIsMSkKICAgICAgICovCgogICAgICB0aGlzLmNvbnRhaW5lciA9IHRoaXMubWFwLmdldENhbnZhc0NvbnRhaW5lcigpOwoKICAgICAgdGhpcy5zdmcgPSBkMwogICAgICAuc2VsZWN0KHRoaXMuY29udGFpbmVyKQogICAgICAuYXBwZW5kKCJzdmciKQogICAgICAuYXR0cigid2lkdGgiLCIxMDAlIikKICAgICAgLmF0dHIoImhlaWdodCIsIjgwMCIpCiAgICAgIC5zdHlsZSgicG9zaXRpb24iLCJhYnNvbHV0ZSIpCiAgICAgIC5zdHlsZSgiei1pbmRleCIsMTApOwoKICAgICAgdGhpcy5kb3RzID0gdGhpcy5zdmcKICAgICAgLnNlbGVjdEFsbCgiY2lyY2xlIikKICAgICAgLmRhdGEodGhpcy5maWx0ZXJlZF9kYXRhc2V0KQogICAgICAuZW50ZXIoKQogICAgICAuYXBwZW5kKCJjaXJjbGUiKQogICAgICAuYXR0cigiciIsIGQgPT4gZC5ua2lsbCAvIDE1KQogICAgICAuc3R5bGUoIm9wYWNpdHkiLDAuNykKICAgICAgLnN0eWxlKCJmaWxsIiwiI2ZmMzYzNiIpCiAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgZnVuY3Rpb24oZCkge3JldHVybiAidHJhbnNsYXRlKCIgKyBwcm9qZWN0aW9uKFtkLmxvbmdpdHVkZSxkLmxhdGl0dWRlXSkgKyAiKSI7fSk7CgoKICAgICAgY29uc29sZS5sb2codGhpcy5kYXRhc2V0KTsKCiAgICAgIHRoaXMucmVuZGVyKCk7CiAgICB9LAoKICAgIHByb2plY3Rpb246IHsKICAgICAgZDMuZ2VvLm1lcmNhdG9yKCk7CiAgICB9LAoKICAgIHByb2plY3Q6IGZ1bmN0aW9uIChkKSB7CiAgICAgIGNvbnNvbGUubG9nKCJwcm9qZWN0aW9uIik7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgdmFyIG1hcCA9IHNlbGYubWFwOwogICAgICBjb25zb2xlLmxvZyhkKTsKICAgICAgcmV0dXJuIG1hcC5wcm9qZWN0KG5ldyBtYXBib3hnbC5MbmdMYXQoZC5sb25naXR1ZGUsIGQubGF0aXR1ZGUpKTsKICAgIH0sCgogICAgcmVuZGVyKCkgewogICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgICAgY29uc29sZS5sb2coIlJlbmRlcmVkIik7CiAgICAgIHRoaXMuZG90cwogICAgICAuYXR0cigiY3giLGZ1bmN0aW9uIChkKXsKICAgICAgICByZXR1cm4gc2VsZi5wcm9qZWN0KGQpLng7CiAgICAgIH0pCiAgICAgIC5hdHRyKCJjeSIsZnVuY3Rpb24gKGQpewogICAgICAgIHJldHVybiBzZWxmLnByb2plY3QoZCkueTsKICAgICAgfSk7CgogICAgfSwKICAgIGR5bkZpbHRlcigpIHsKICAgICAgY29uc29sZS5sb2coImZpbHRlcmVkIik7CiAgICAgIGlmKHRoaXMuc2VsZWN0ZWQgPT09ICIiKXsKICAgICAgICB0aGlzLmZpbHRlcmVkX2RhdGFzZXQgPSB0aGlzLmRhdGFzZXQ7CiAgICAgIH0KICAgICAgZWxzZXsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgdGhpcy5maWx0ZXJlZF9kYXRhc2V0ID0gdGhpcy5kYXRhc2V0LmZpbHRlcihmdW5jdGlvbiAoZCl7IHJldHVybiBkLml5ZWFyID09PSBzZWxmLnNlbGVjdGVkfSk7CiAgICAgIH0KICAgICAgdGhpcy5pbml0KCk7CiAgICB9CgogIH0sCgp9Owo="},{"version":3,"sources":["View1.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"View1.vue","sourceRoot":"src/components","sourcesContent":["<!-- Your HTML goes here -->\n<template>\n  <div>\n    <select  v-model=\"selected\" @change=\"dynFilter\">\n      <option value=\"\">All Years</option>\n      <option v-for=\"option in options\" v-bind:key=\"option\" v-bind:value=\"option\">\n        {{ option }}\n      </option>\n    </select>\n    <span>Selected: {{ selected }}</span>\n\n  <div id=\"mapContainer\" class = \"darkmap\" ></div>\n  </div>\n</template>\n\n<script>\nimport mapboxgl from \"mapbox-gl\"\nimport * as d3 from \"d3\";\n\nexport default {\n  name: \"DarkMap\",\n  props: {\n    dataset: {\n      required: true,\n      type: Array\n    }\n  },\n  data() {\n    return {\n      accessToken: \"pk.eyJ1IjoiY3Bvc3NpbmdlciIsImEiOiJja2tqMHV5bjExNHIzMnVudzc1bzJ4dWhoIn0.53g3xS17ONQ80xyG80Fzpw\",\n      map: null,\n      container: null,\n      svg: null,\n      dots: null,\n      filtered_dataset: this.dataset,\n      selected: \"2010\",\n      options: [...new Set(this.dataset.map(item => item.iyear))],\n      element: null,\n    };\n  },\n  mounted() {\n   this.init();\n  },\n  methods: {\n    init(){\n      mapboxgl.accessToken = this.accessToken;\n\n      this.map = new mapboxgl.Map({\n        container: \"mapContainer\",\n        style: \"mapbox://styles/cpossinger/ckkj3k7491coo17rx6ey9ga67\",\n        zoom: 2,\n      });\n\n      this.map.on(\"viewreset\", () => {this.render()});\n      this.map.on(\"move\", () => {this.render()});\n      this.map.on(\"moveend\", () => {this.render()});\n\n      /*\n      d3.selectAll(\".mapboxgl-canvas\")\n      .style(\"opacity\", 1)\n      .style(\"position\",\"absolute\")\n      .style(\"z-index\",1)\n       */\n\n      this.container = this.map.getCanvasContainer();\n\n      this.svg = d3\n      .select(this.container)\n      .append(\"svg\")\n      .attr(\"width\",\"100%\")\n      .attr(\"height\",\"800\")\n      .style(\"position\",\"absolute\")\n      .style(\"z-index\",10);\n\n      this.dots = this.svg\n      .selectAll(\"circle\")\n      .data(this.filtered_dataset)\n      .enter()\n      .append(\"circle\")\n      .attr(\"r\", d => d.nkill / 15)\n      .style(\"opacity\",0.7)\n      .style(\"fill\",\"#ff3636\")\n          .attr(\"transform\", function(d) {return \"translate(\" + projection([d.longitude,d.latitude]) + \")\";});\n\n\n      console.log(this.dataset);\n\n      this.render();\n    },\n\n    projection: {\n      d3.geo.mercator();\n    },\n\n    project: function (d) {\n      console.log(\"projection\");\n      var self = this;\n      var map = self.map;\n      console.log(d);\n      return map.project(new mapboxgl.LngLat(d.longitude, d.latitude));\n    },\n\n    render() {\n      var self = this;\n\n          console.log(\"Rendered\");\n      this.dots\n      .attr(\"cx\",function (d){\n        return self.project(d).x;\n      })\n      .attr(\"cy\",function (d){\n        return self.project(d).y;\n      });\n\n    },\n    dynFilter() {\n      console.log(\"filtered\");\n      if(this.selected === \"\"){\n        this.filtered_dataset = this.dataset;\n      }\n      else{\n        var self = this;\n        this.filtered_dataset = this.dataset.filter(function (d){ return d.iyear === self.selected});\n      }\n      this.init();\n    }\n\n  },\n\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n#mapContainer {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n}\n</style>"]}]}