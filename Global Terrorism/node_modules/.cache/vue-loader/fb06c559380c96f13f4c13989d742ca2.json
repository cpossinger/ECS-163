{"remainingRequest":"/home/cam/Documents/ECS 163/Homework 4/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/cam/Documents/ECS 163/Homework 4/src/components/View1.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/cam/Documents/ECS 163/Homework 4/src/components/View1.vue","mtime":1612375034988},{"path":"/home/cam/Documents/ECS 163/Homework 4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cam/Documents/ECS 163/Homework 4/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/cam/Documents/ECS 163/Homework 4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/cam/Documents/ECS 163/Homework 4/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBtYXBib3hnbCBmcm9tICJtYXBib3gtZ2wiCmltcG9ydCAqIGFzIGQzIGZyb20gImQzIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRGFya01hcCIsCiAgcHJvcHM6IHsKICAgIGRhdGFzZXQ6IHsKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgIHR5cGU6IEFycmF5CiAgICB9CgogIH0sCiAgICBkYXRhKCkgewogICAgICByZXR1cm4gewogICAgICAgIGFjY2Vzc1Rva2VuOiAicGsuZXlKMUlqb2lZM0J2YzNOcGJtZGxjaUlzSW1FaU9pSmphMnRxTUhWNWJqRXhOSEl6TW5WdWR6YzFieko0ZFdob0luMC41M2czeFMxN09OUTgweHlHODBGenB3IiwKICAgICAgICBtYXA6IG51bGwsCiAgICAgICAgY29udGFpbmVyOiBudWxsLAogICAgICAgIHN2ZzogbnVsbCwKICAgICAgICBkb3RzOiBudWxsLAogICAgICAgIGZpbHRlcmVkX2RhdGFzZXQ6IHRoaXMuZGF0YXNldCwKICAgICAgICBlbGVtZW50OiBudWxsLAogICAgICAgIHNlbGVjdGVkOiAiMjAxMCIsCiAgICAgICAgb3B0aW9uczogWy4uLm5ldyBTZXQodGhpcy5kYXRhc2V0Lm1hcChpdGVtID0+IGl0ZW0uaXllYXIpKV0sCiAgICAgICAgYnJ1c2g6IG51bGwKICAgICAgfTsKICAgIH0sCiAgICBtb3VudGVkKCkgewogICAgICB0aGlzLmluaXQoKTsKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgIGluaXQoKSB7CiAgICAgICAgbWFwYm94Z2wuYWNjZXNzVG9rZW4gPSB0aGlzLmFjY2Vzc1Rva2VuOwoKICAgICAgICB0aGlzLm1hcCA9IG5ldyBtYXBib3hnbC5NYXAoewogICAgICAgICAgY29udGFpbmVyOiAibWFwQ29udGFpbmVyIiwKICAgICAgICAgIHN0eWxlOiAibWFwYm94Oi8vc3R5bGVzL2Nwb3NzaW5nZXIvY2trajNrNzQ5MWNvbzE3cng2ZXk5Z2E2NyIsCiAgICAgICAgICB6b29tOiAyLAogICAgICAgIH0pOwoKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgdGhpcy5tYXAub24oInZpZXdyZXNldCIsIHNlbGYucmVuZGVyKTsKICAgICAgICB0aGlzLm1hcC5vbigibW92ZSIsIHNlbGYucmVuZGVyKTsKICAgICAgICB0aGlzLm1hcC5vbigibW92ZWVuZCIsIHNlbGYucmVuZGVyKTsKCiAgICAgICAgZDMuc2VsZWN0QWxsKCIubWFwYm94Z2wtY2FudmFzIikKICAgICAgICAgICAgLnN0eWxlKCJvcGFjaXR5IiwgMSkKICAgICAgICAgICAgLnN0eWxlKCJwb3NpdGlvbiIsICJhYnNvbHV0ZSIpCiAgICAgICAgICAgIC5zdHlsZSgiei1pbmRleCIsIDEpCgogICAgICAgIHRoaXMuaW5pdDIoKTsKCiAgICAgIH0sCgogICAgICBpbml0MigpIHsKCgogICAgICAgIHRoaXMuY29udGFpbmVyID0gdGhpcy5tYXAuZ2V0Q2FudmFzQ29udGFpbmVyKCk7CgogICAgICAgIGQzLnNlbGVjdCgiI21hcENvbnRhaW5lciIpCiAgICAgICAgICAgIC5jYWxsKCBkMy5icnVzaCgpICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBicnVzaCBmZWF0dXJlIHVzaW5nIHRoZSBkMy5icnVzaCBmdW5jdGlvbgogICAgICAgICAgICAgICAgLmV4dGVudCggWyBbMCwwXSwgWzQwMCw0MDBdIF0gKSk7CgogICAgICAgIHRoaXMuc3ZnID0gZDMKICAgICAgICAgICAgLnNlbGVjdCh0aGlzLmNvbnRhaW5lcikKICAgICAgICAgICAgLmFwcGVuZCgic3ZnIikKICAgICAgICAgICAgLmF0dHIoIndpZHRoIiwgIjEwMCUiKQogICAgICAgICAgICAuYXR0cigiaGVpZ2h0IiwgIjIwMDAiKQogICAgICAgICAgICAuc3R5bGUoInBvc2l0aW9uIiwgImFic29sdXRlIikKICAgICAgICAgICAgLnN0eWxlKCJ6LWluZGV4IiwgMTApOwoKCiAgICAgICAgY29uc29sZS5sb2codGhpcy5maWx0ZXJlZF9kYXRhc2V0KTsKCiAgICAgICAgdGhpcy5kb3RzID0gdGhpcy5zdmcKICAgICAgICAgICAgLnNlbGVjdEFsbCgiY2lyY2xlIikKICAgICAgICAgICAgLmRhdGEodGhpcy5maWx0ZXJlZF9kYXRhc2V0KQogICAgICAgICAgICAuZW50ZXIoKQogICAgICAgICAgICAuYXBwZW5kKCJjaXJjbGUiKQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAiY2lyY2xlIikKICAgICAgICAgICAgLmF0dHIoInIiLCBkID0+IGQubmtpbGwgLyAyMCkKICAgICAgICAgICAgLnN0eWxlKCJvcGFjaXR5IiwgMC43KQogICAgICAgICAgICAuc3R5bGUoImZpbGwiLCAiI2ZmMzYzNiIpCgoKICAgICAgICB0aGlzLnJlbmRlcigpOwogICAgICB9LAoKCiAgICAgIHByb2plY3Rpb246IGZ1bmN0aW9uIChkKSB7CiAgICAgICAgY29uc29sZS5sb2coInByb2plY3Rpb24iKTsKICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgLy92YXIgbWFwID0gc2VsZi5tYXA7CiAgICAgICAgY29uc29sZS5sb2codHlwZW9mIGQubG9uZ2l0dWRlKTsKICAgICAgICByZXR1cm4gc2VsZi5tYXAucHJvamVjdChuZXcgbWFwYm94Z2wuTG5nTGF0KGQubG9uZ2l0dWRlLCBkLmxhdGl0dWRlKSk7CiAgICAgIH0sCgogICAgICByZW5kZXIoKSB7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgICBjb25zb2xlLmxvZygiUmVuZGVyZWQiKTsKICAgICAgICBkMy5zZWxlY3RBbGwoIi5jaXJjbGUiKQogICAgICAgICAgICAuYXR0cigiY3giLCBmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgIHJldHVybiBzZWxmLnByb2plY3Rpb24oZCkueDsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmF0dHIoImN5IiwgZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgICByZXR1cm4gc2VsZi5wcm9qZWN0aW9uKGQpLnk7CiAgICAgICAgICAgIH0pOwoKICAgICAgfSwKCgogICAgfSwKICB9CgoK"},{"version":3,"sources":["View1.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA","file":"View1.vue","sourceRoot":"src/components","sourcesContent":["<!-- Your HTML goes here -->\n<template>\n  <div>\n  <select  v-model=\"selected\" >\n    <option value=\"\">All Years</option>\n    <option v-for=\"option in options\" v-bind:key=\"option\" v-bind:value=\"option\">\n      {{ option }}\n    </option>\n  </select>\n  <span>Selected: {{ selected }}</span>\n  <div id=\"mapContainer\" class=\"darkmap\" ></div>\n  </div>\n</template>\n\n<script>\nimport mapboxgl from \"mapbox-gl\"\nimport * as d3 from \"d3\";\n\nexport default {\n  name: \"DarkMap\",\n  props: {\n    dataset: {\n      required: true,\n      type: Array\n    }\n\n  },\n    data() {\n      return {\n        accessToken: \"pk.eyJ1IjoiY3Bvc3NpbmdlciIsImEiOiJja2tqMHV5bjExNHIzMnVudzc1bzJ4dWhoIn0.53g3xS17ONQ80xyG80Fzpw\",\n        map: null,\n        container: null,\n        svg: null,\n        dots: null,\n        filtered_dataset: this.dataset,\n        element: null,\n        selected: \"2010\",\n        options: [...new Set(this.dataset.map(item => item.iyear))],\n        brush: null\n      };\n    },\n    mounted() {\n      this.init();\n    },\n    methods: {\n      init() {\n        mapboxgl.accessToken = this.accessToken;\n\n        this.map = new mapboxgl.Map({\n          container: \"mapContainer\",\n          style: \"mapbox://styles/cpossinger/ckkj3k7491coo17rx6ey9ga67\",\n          zoom: 2,\n        });\n\n        var self = this;\n        this.map.on(\"viewreset\", self.render);\n        this.map.on(\"move\", self.render);\n        this.map.on(\"moveend\", self.render);\n\n        d3.selectAll(\".mapboxgl-canvas\")\n            .style(\"opacity\", 1)\n            .style(\"position\", \"absolute\")\n            .style(\"z-index\", 1)\n\n        this.init2();\n\n      },\n\n      init2() {\n\n\n        this.container = this.map.getCanvasContainer();\n\n        d3.select(\"#mapContainer\")\n            .call( d3.brush()                     // Add the brush feature using the d3.brush function\n                .extent( [ [0,0], [400,400] ] ));\n\n        this.svg = d3\n            .select(this.container)\n            .append(\"svg\")\n            .attr(\"width\", \"100%\")\n            .attr(\"height\", \"2000\")\n            .style(\"position\", \"absolute\")\n            .style(\"z-index\", 10);\n\n\n        console.log(this.filtered_dataset);\n\n        this.dots = this.svg\n            .selectAll(\"circle\")\n            .data(this.filtered_dataset)\n            .enter()\n            .append(\"circle\")\n            .attr(\"class\", \"circle\")\n            .attr(\"r\", d => d.nkill / 20)\n            .style(\"opacity\", 0.7)\n            .style(\"fill\", \"#ff3636\")\n\n\n        this.render();\n      },\n\n\n      projection: function (d) {\n        console.log(\"projection\");\n        var self = this;\n        //var map = self.map;\n        console.log(typeof d.longitude);\n        return self.map.project(new mapboxgl.LngLat(d.longitude, d.latitude));\n      },\n\n      render() {\n        var self = this;\n\n        console.log(\"Rendered\");\n        d3.selectAll(\".circle\")\n            .attr(\"cx\", function (d) {\n              return self.projection(d).x;\n            })\n            .attr(\"cy\", function (d) {\n              return self.projection(d).y;\n            });\n\n      },\n\n\n    },\n  }\n\n\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n#mapContainer {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n  z-index: 0;\n}\n</style>"]}]}